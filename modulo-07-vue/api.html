<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Filtro em Tempo Real Vue 3</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-10">

    <div id="app" class="max-w-3xl mx-auto">
        <h1 class="text-3xl font-bold mb-6 text-indigo-600 text-center">DiretÃ³rio de Profissionais ğŸ¥</h1>

        <div class="mb-8">
            <input 
                v-model="termoBusca" 
                type="text" 
                placeholder="Buscar profissional pelo nome..." 
                class="w-full border-2 border-indigo-200 p-3 rounded-lg focus:outline-none focus:border-indigo-500 shadow-sm text-lg"
            >
        </div>

        <div v-if="carregando" class="text-center text-xl text-gray-600 animate-pulse mt-10">
            Conectando ao servidor... ğŸ“¡
        </div>

        <div v-else class="grid grid-cols-1 md:grid-cols-2 gap-4">
            
            <div 
                v-for="pessoa in pessoasFiltradas" 
                class="bg-white p-5 rounded-lg shadow border-l-4 border-indigo-500 hover:shadow-lg transition"
            >
                <h2 class="text-xl font-bold text-gray-800">{{ pessoa.name }}</h2>
                <p class="text-gray-600 text-sm mt-1">ğŸ“§ {{ pessoa.email }}</p>
                <p class="text-gray-500 text-sm mt-1">ğŸ¢ ClÃ­nica: {{ pessoa.company.name }}</p>
            </div>
        </div>
        
        <div v-if="!carregando && pessoasFiltradas.length === 0" class="text-center text-gray-500 mt-8 text-lg font-semibold">
            Nenhum profissional encontrado com esse nome. ğŸ•µï¸â€â™‚ï¸
        </div>

    </div>

    <script>
        // Importamos o 'computed' da biblioteca do Vue
        const { createApp, ref, onMounted, computed } = Vue;

        createApp({
            setup() {
                const pessoas = ref([]); 
                const carregando = ref(true);
                
                // VariÃ¡vel para guardar o que o usuÃ¡rio digita
                const termoBusca = ref('');

                async function buscarPessoas() {
                    try {
                        const resposta = await fetch('https://jsonplaceholder.typicode.com/users');
                        const dados = await resposta.json();
                        pessoas.value = dados;
                    } catch (erro) {
                        console.error("Erro na busca:", erro);
                    } finally {
                        carregando.value = false;
                    }
                }

                onMounted(() => {
                    buscarPessoas();
                });

                // --- A MÃGICA DA BUSCA ---
                // Esta variÃ¡vel refaz a lista toda vez que 'termoBusca' ou 'pessoas' mudam
                const pessoasFiltradas = computed(() => {
                    
                    // Se o campo de busca estiver vazio, devolvemos a lista inteira
                    if (termoBusca.value === '') {
                        return pessoas.value;
                    }
                    
                    // Transformamos o que o usuÃ¡rio digitou em minÃºsculo para evitar erros (Ex: 'Leanne' vs 'leanne')
                    const buscaMinuscula = termoBusca.value.toLowerCase();
                    
                    // O .filter() Ã© do JavaScript. Ele cria uma lista nova sÃ³ com quem passar no teste
                    return pessoas.value.filter(pessoa => {
                        const nomeMinusculo = pessoa.name.toLowerCase();
                        
                        // O .includes() verifica se o texto da busca existe dentro do nome da pessoa
                        return nomeMinusculo.includes(buscaMinuscula);
                    });
                });

                return {
                    carregando,
                    termoBusca,
                    pessoasFiltradas // Retornamos a lista inteligente para o HTML desenhar
                }
            }
        }).mount('#app');
    </script>
</body>
</html>